docker build srcs/nginx -t nginx -lundi 22 fÃ©vrier 2021, 10:34:57 (UTC+0100)
Sending build context to Docker daemon  1.317MB
Step 1/12 : FROM 	alpine:latest
latest: Pulling from library/alpine
ba3557a56b15: Pulling fs layer
ba3557a56b15: Verifying Checksum
ba3557a56b15: Download complete
ba3557a56b15: Pull complete
Digest: sha256:a75afd8b57e7f34e4dad8d65e2c7ba2e1975c795ce1ee22fa34f8cf46f96a3be
Status: Downloaded newer image for alpine:latest
 ---> 28f6e2705743
Step 2/12 : RUN 	apk update 		&& apk add nginx 					openssl
 ---> Running in a74e0b723326
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
v3.13.2-8-g7bb1c88019 [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]
v3.13.2-12-gea23800845 [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]
OK: 13877 distinct packages available
(1/3) Installing pcre (8.44-r0)
(2/3) Installing nginx (1.18.0-r13)
Executing nginx-1.18.0-r13.pre-install
Executing nginx-1.18.0-r13.post-install
(3/3) Installing openssl (1.1.1j-r0)
Executing busybox-1.32.1-r3.trigger
OK: 8 MiB in 17 packages
Removing intermediate container a74e0b723326
 ---> 026fc39f96b6
Step 3/12 : RUN		apk add telegraf
 ---> Running in f80675c5bfae
(1/1) Installing telegraf (1.17.0-r0)
Executing telegraf-1.17.0-r0.pre-install
Executing busybox-1.32.1-r3.trigger
OK: 97 MiB in 18 packages
Removing intermediate container f80675c5bfae
 ---> fdd94111275b
Step 4/12 : COPY 	nginx.conf		/etc/nginx/
 ---> 73f38943b9db
Step 5/12 : COPY	nginx_setup.sh	setup.sh
 ---> 84d4e3c539f7
Step 6/12 : RUN		mkdir -p /etc/nginx/certs
 ---> Running in 33eef57c2007
Removing intermediate container 33eef57c2007
 ---> b87b85bcc75b
Step 7/12 : RUN		mkdir -p /run/nginx
 ---> Running in 447c7258bf87
Removing intermediate container 447c7258bf87
 ---> 171d847e6fb8
Step 8/12 : COPY	page			/page/
 ---> 07e955014746
Step 9/12 : COPY	./telegraf.conf /etc/telegraf.conf
 ---> e96d6b9ba49a
Step 10/12 : RUN openssl req -x509 -nodes 	-subj '/C=FR/ST=PARIS/L=PARIS/O=42/CN=localhost' 	-days 365 -newkey rsa:2048 	-keyout /etc/ssl/private/nginx-selfsigned.key 	-out /etc/nginx/certs/nginx-selfsigned.crt
 ---> Running in 037e418fbb99
[91mGenerating a RSA private key
.........[0m[91m.[0m[91m.....[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m+[0m[91m+[0m[91m+[0m[91m+[0m[91m+
[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m........[0m[91m.[0m[91m.[0m[91m.[0m[91m+[0m[91m+[0m[91m+++
writing new private key to '/etc/ssl/private/nginx-selfsigned.key'
[0m[91m-----
[0mRemoving intermediate container 037e418fbb99
 ---> 0c63d1dcf5a8
Step 11/12 : EXPOSE 35:80 36:443
 ---> Running in 8eab2b9f8e89
Removing intermediate container 8eab2b9f8e89
 ---> 9a0781f5694e
Step 12/12 : ENTRYPOINT ["sh", "./setup.sh"]
 ---> Running in 8663fa411132
Removing intermediate container 8663fa411132
 ---> a77001d64092
Successfully built a77001d64092
Successfully tagged nginx:latest
